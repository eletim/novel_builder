{% extends "base.html" %}
{% set title = (volume_title or volume_name) ~ " / å…¨ä½“ãƒ—ãƒ­ãƒƒãƒˆ / " ~ label %}
{% block header_right %}
<div class="actions">
  <a class="btn" href="{{ url_for('v_outline', volume_path=volume_path) }}">ä¸€è¦§è¡¨ç¤º</a>
  <a class="btn" href="{{ url_for('v_outline_fullscreen', volume_path=volume_path) }}?stage={{ filename }}">å…¨ç”»é¢</a>
  <button id="saveBtn" class="btn">ğŸ’¾ ä¿å­˜ï¼ˆCtrl+Sï¼‰</button>
</div>
{% endblock %}
{% block content %}
<div class="single-rows">
  <div class="single-middle">
    <div class="side side-left">
      <a class="nav-arrow" aria-label="å‰ã‚¹ãƒ†ãƒ¼ã‚¸ (â†)" href="{{ url_for('v_outline_single', volume_path=volume_path) }}?stage={{ prev_stage }}">
        <svg class="icon"><use href="#i-chevron-left"></use></svg><span class="sr-only">å‰ã‚¹ãƒ†ãƒ¼ã‚¸</span>
      </a>
    </div>

    <section class="pane" id="singlePane" data-chapter="{{ outline_path }}" data-filename="{{ filename }}">
      <header class="pane-head">
        <div class="pane-title">
          <strong>{{ label }}</strong>
          <span class="file">{{ filename }}</span>
          <span class="dirty" hidden>â—æœªä¿å­˜</span>
        </div>
        <div class="pane-tools">
          <span class="counter" title="æ”¹è¡Œã¯å«ã‚ã¾ã›ã‚“"><span id="charCount">0</span> æ–‡å­—ãƒ»<span id="lineCount">0</span> è¡Œ</span>
          <button class="btn" id="saveBtn2">ä¿å­˜</button>
        </div>
      </header>
      <textarea class="editor" id="singleEditor" spellcheck="false" wrap="soft">{{ content }}</textarea>
    </section>

    <div class="side side-right">
      <a class="nav-arrow" aria-label="æ¬¡ã‚¹ãƒ†ãƒ¼ã‚¸ (â†’)" href="{{ url_for('v_outline_single', volume_path=volume_path) }}?stage={{ next_stage }}">
        <svg class="icon"><use href="#i-chevron-right"></use></svg><span class="sr-only">æ¬¡ã‚¹ãƒ†ãƒ¼ã‚¸</span>
      </a>
    </div>
  </div>
</div>
<div id="toast" class="toast" hidden></div>
{% endblock %}
{% block scripts %}
<script>
window.__SINGLE__ = {
  prevStageUrl: "{{ url_for('v_outline_single', volume_path=volume_path) }}?stage={{ prev_stage }}",
  nextStageUrl: "{{ url_for('v_outline_single', volume_path=volume_path) }}?stage={{ next_stage }}"
};
</script>
{% endblock %}
