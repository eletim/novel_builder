{% extends "base.html" %}
{% set page_class = "page-fullscreen" %}
{% set title = chapter_name ~ " / " ~ label ~ " â€“ å…¨ç”»é¢" %}

{% block header_right %}{% endblock %} {# å…¨ç”»é¢ã§ã¯ãƒ˜ãƒƒãƒ€ãƒ¼æ¶ˆã™ #}

{% block content %}
<div class="fs-root" data-chapter="{{ chapter_path }}" data-filename="{{ filename }}" data-autosave="0">
  <header class="fs-head">
    {% set parts = chapter_name.split('-', 1) %}
    <a class="ch-link" href="{{ url_for('chapter', chapter_path=chapter_path) }}">{{ parts[0] }}</a>
    {% if parts|length > 1 %}<span class="ch-rest">-{{ parts[1] }}</span>{% endif %}
    <span class="sep">â€“</span>
    <strong>{{ label }}</strong>
    <span class="file">{{ filename }}</span>
    <span class="dirty" hidden>â—æœªä¿å­˜</span>
    <div class="fs-head-tools">
      <a class="btn" href="{{ url_for('chapter_single', chapter_path=chapter_path) }}?stage={{ filename }}">å€‹åˆ¥è¡¨ç¤ºã¸</a>
      <button id="fsSaveBtn" class="btn">ğŸ’¾ ä¿å­˜ï¼ˆCtrl+Sï¼‰</button>
      <span class="counter" title="æ”¹è¡Œã¯å«ã‚ã¾ã›ã‚“"><span id="fsChar">0</span> æ–‡å­—ãƒ»<span id="fsLine">0</span> è¡Œ</span>
    </div>
  </header>

  <div id="fsEditor" class="fs-editor" contenteditable="true" spellcheck="false" aria-label="å…¨ç”»é¢ã‚¨ãƒ‡ã‚£ã‚¿"></div>
</div>

<div id="toast" class="toast" hidden></div>
{% endblock %}

{% block scripts %}
<script>
  // â˜… app.js ã‚ˆã‚Šâ€œå¾Œâ€ã§ã‚‚ OKï¼ˆDOMContentLoaded å¾…ã¡ã§åˆæœŸåŒ–ã™ã‚‹ãŸã‚ï¼‰
  window.__FULL__ = {
    chapterPath: "{{ chapter_path }}",
    filename: "{{ filename }}",
    content: {{ content | tojson | safe }},
    prevChapterUrl: "{{ url_for('chapter', chapter_path=prev_chapter) }}",
    nextChapterUrl: "{{ url_for('chapter', chapter_path=next_chapter) }}"
  };
</script>
{% endblock %}
