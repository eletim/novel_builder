{% extends "base.html" %}
{% set title = chapter_name ~ " / " ~ label %}

{% block header_right %}
<div class="actions">
  <a class="btn" href="{{ url_for('chapter', chapter_path=chapter_path) }}">ä¸€è¦§è¡¨ç¤º</a>
  <button id="saveBtn" class="btn">ğŸ’¾ ä¿å­˜ï¼ˆCtrl+Sï¼‰</button>
</div>
{% endblock %}
{% block content %}
<!-- <h1>{{ chapter_name }}</h1>
<p class="muted">{{ chapter_path }} / <strong>{{ label }}</strong> <span class="file">{{ filename }}</span></p> -->

<div class="single-rows">
  <!-- ä¸Šï¼šå‰ç«  -->
  <div class="vnav vnav-top">
    <a class="nav-arrow" aria-label="å‰ã®ç« ã¸ (â†‘)"
       href="{{ url_for('chapter_single', chapter_path=prev_chapter) }}?stage={{ filename }}">
      <svg class="icon" aria-hidden="true"><use href="#i-chevron-up"></use></svg>
      <span class="sr-only">å‰ã®ç« </span>
    </a>
  </div>

  <!-- ä¸­å¤®ï¼šå·¦(15%)ï¼‹æœ¬æ–‡(70%)ï¼‹å³(15%) -->
  <div class="single-middle">
    <!-- å·¦ï¼šå‰ã‚¹ãƒ†ãƒ¼ã‚¸ -->
    <div class="side side-left">
      <a class="nav-arrow" aria-label="å‰ã‚¹ãƒ†ãƒ¼ã‚¸ (â†)"
         href="{{ url_for('chapter_single', chapter_path=chapter_path) }}?stage={{ prev_stage }}">
        <svg class="icon" aria-hidden="true"><use href="#i-chevron-left"></use></svg>
        <span class="sr-only">å‰ã‚¹ãƒ†ãƒ¼ã‚¸</span>
      </a>
    </div>

    <!-- æœ¬æ–‡ 70% -->
    <section class="pane" id="singlePane" data-chapter="{{ chapter_path }}" data-filename="{{ filename }}">
      <header class="pane-head">
        <div class="pane-title">
          <strong>{{ chapter_name }}</strong>
          <span>-</spap>
          <strong>{{ label }}</strong>
          <span class="file">{{ filename }}</span>
          <span class="dirty" hidden>â—æœªä¿å­˜</span>
        </div>
        <div class="pane-tools">
          <span class="counter" aria-live="polite" title="æ”¹è¡Œã¯æ–‡å­—æ•°ã«å«ã‚ã¾ã›ã‚“">
            <span id="charCount">0</span> æ–‡å­—ãƒ»<span id="lineCount">0</span> è¡Œ
          </span>
          <button class="btn" id="saveBtn2">ä¿å­˜</button>
        </div>
      </header>
      <textarea class="editor" id="singleEditor" spellcheck="false" wrap="soft">{{ content }}</textarea>
    </section>

    <!-- å³ï¼šæ¬¡ã‚¹ãƒ†ãƒ¼ã‚¸ -->
    <div class="side side-right">
      <a class="nav-arrow" aria-label="æ¬¡ã‚¹ãƒ†ãƒ¼ã‚¸ (â†’)"
         href="{{ url_for('chapter_single', chapter_path=chapter_path) }}?stage={{ next_stage }}">
        <svg class="icon" aria-hidden="true"><use href="#i-chevron-right"></use></svg>
        <span class="sr-only">æ¬¡ã‚¹ãƒ†ãƒ¼ã‚¸</span>
      </a>
    </div>
  </div>

  <!-- ä¸‹ï¼šæ¬¡ç«  -->
  <div class="vnav vnav-bottom">
    <a class="nav-arrow" aria-label="æ¬¡ã®ç« ã¸ (â†“)"
       href="{{ url_for('chapter_single', chapter_path=next_chapter) }}?stage={{ filename }}">
      <svg class="icon" aria-hidden="true"><use href="#i-chevron-down"></use></svg>
      <span class="sr-only">æ¬¡ã®ç« </span>
    </a>
  </div>
</div>

<div id="toast" class="toast" hidden></div>
{% endblock %}

{% block scripts %}
<script>
  // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ï¼ˆæ—¢å­˜ä»•æ§˜ï¼šå·¦å³=ã‚¹ãƒ†ãƒ¼ã‚¸ã€ä¸Šä¸‹=ç« ï¼‰
  window.__SINGLE__ = {
    prevStageUrl: "{{ url_for('chapter_single', chapter_path=chapter_path) }}?stage={{ prev_stage }}",
    nextStageUrl: "{{ url_for('chapter_single', chapter_path=chapter_path) }}?stage={{ next_stage }}",
    prevChapterUrl: "{{ url_for('chapter_single', chapter_path=prev_chapter) }}?stage={{ filename }}",
    nextChapterUrl: "{{ url_for('chapter_single', chapter_path=next_chapter) }}?stage={{ filename }}"
  };
</script>
{% endblock %}
