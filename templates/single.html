{% extends "base.html" %}
{% set title = chapter_name ~ " / " ~ label %}

{% block header_right %}
<div class="actions">
  <a class="btn" href="{{ url_for('chapter', chapter_path=chapter_path) }}">ä¸€è¦§è¡¨ç¤º</a>
  <button id="saveBtn" class="btn">ğŸ’¾ ä¿å­˜ï¼ˆCtrl+Sï¼‰</button>
</div>
{% endblock %}

{% block content %}
<h1>{{ chapter_name }}</h1>
<p class="muted">{{ chapter_path }} / <strong>{{ label }}</strong> <span class="file">{{ filename }}</span></p>

<section class="pane" id="singlePane" data-chapter="{{ chapter_path }}" data-filename="{{ filename }}">
  <header class="pane-head">
    <div class="pane-title">
      <strong>{{ label }}</strong>
      <span class="file">{{ filename }}</span>
      <span class="dirty" hidden>â—æœªä¿å­˜</span>
    </div>
    <div class="pane-tools">
      <!-- å³ä¸Šã«ã‚‚ä¿é™ºã¨ã—ã¦å·¦å³ãƒœã‚¿ãƒ³æ®‹ã™ï¼ˆä»»æ„ï¼‰ -->
      <a class="btn" href="{{ url_for('chapter_single', chapter_path=chapter_path) }}?stage={{ prev_stage }}">ï¼œ</a>
      <a class="btn" href="{{ url_for('chapter_single', chapter_path=chapter_path) }}?stage={{ next_stage }}">ï¼</a>
      <button class="btn" id="saveBtn2">ä¿å­˜</button>
    </div>
  </header>

  <!-- å››è¾ºãƒŠãƒ“ -->
  <nav class="nav-arrows" aria-label="Stage/Chapter navigation">
    <!-- å·¦ = å‰ã‚¹ãƒ†ãƒ¼ã‚¸ -->
    <a class="nav-arrow arrow-left" aria-label="å‰ã‚¹ãƒ†ãƒ¼ã‚¸ (â†)"
       href="{{ url_for('chapter_single', chapter_path=chapter_path) }}?stage={{ prev_stage }}">
      <svg class="icon" aria-hidden="true"><use href="#i-chevron-left"></use></svg>
      <span class="sr-only">å‰ã‚¹ãƒ†ãƒ¼ã‚¸</span>
    </a>

    <!-- å³ = æ¬¡ã‚¹ãƒ†ãƒ¼ã‚¸ -->
    <a class="nav-arrow arrow-right" aria-label="æ¬¡ã‚¹ãƒ†ãƒ¼ã‚¸ (â†’)"
       href="{{ url_for('chapter_single', chapter_path=chapter_path) }}?stage={{ next_stage }}">
      <svg class="icon" aria-hidden="true"><use href="#i-chevron-right"></use></svg>
      <span class="sr-only">æ¬¡ã‚¹ãƒ†ãƒ¼ã‚¸</span>
    </a>

    <!-- ä¸Š = å‰ç«  -->
    <a class="nav-arrow arrow-up" aria-label="å‰ã®ç« ã¸ (â†‘)"
       href="{{ url_for('chapter_single', chapter_path=prev_chapter) }}?stage={{ filename }}">
      <svg class="icon" aria-hidden="true"><use href="#i-chevron-up"></use></svg>
      <span class="sr-only">å‰ã®ç« </span>
    </a>

    <!-- ä¸‹ = æ¬¡ç«  -->
    <a class="nav-arrow arrow-down" aria-label="æ¬¡ã®ç« ã¸ (â†“)"
       href="{{ url_for('chapter_single', chapter_path=next_chapter) }}?stage={{ filename }}">
      <svg class="icon" aria-hidden="true"><use href="#i-chevron-down"></use></svg>
      <span class="sr-only">æ¬¡ã®ç« </span>
    </a>
  </nav>

  <textarea class="editor" id="singleEditor" spellcheck="false">{{ content }}</textarea>
</section>

<div id="toast" class="toast" hidden></div>
{% endblock %}

{% block scripts %}
<script>
  // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ç”¨ã®URL
  window.__SINGLE__ = {
    prevStageUrl: "{{ url_for('chapter_single', chapter_path=chapter_path) }}?stage={{ prev_stage }}",
    nextStageUrl: "{{ url_for('chapter_single', chapter_path=chapter_path) }}?stage={{ next_stage }}",
    prevChapterUrl: "{{ url_for('chapter_single', chapter_path=prev_chapter) }}?stage={{ filename }}",
    nextChapterUrl: "{{ url_for('chapter_single', chapter_path=next_chapter) }}?stage={{ filename }}"
  };
</script>
{% endblock %}
