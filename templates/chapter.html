{% extends "base.html" %}
{% set title = chapter_name %}
{% block header_right %}
<div class="actions">
  <a class="btn" href="{{ url_for('chapter_single', chapter_path=chapter_path) }}">å€‹åˆ¥è¡¨ç¤º</a>
  <button id="saveAllBtn" class="btn">ğŸ’¾ ã™ã¹ã¦ä¿å­˜ï¼ˆCtrl+Sï¼‰</button>
  <label class="notes-toggle"><input type="checkbox" id="toggleNotes"> notes ã‚’è¡¨ç¤º</label>
</div>
{% endblock %}

{% block content %}
<!-- <h1>{{ chapter_name }}</h1>
<p class="muted">{{ chapter_path }}</p> -->

<!-- â˜… ä¸Šï¼šå‰ãƒãƒ£ãƒ—ã‚¿ãƒ¼ -->
<div class="vnav vnav-top">
  <a class="nav-arrow" aria-label="å‰ã®ç« ã¸ (â†‘)"
     href="{{ url_for('chapter', chapter_path=prev_chapter) }}">
    <svg class="icon" aria-hidden="true"><use href="#i-chevron-up"></use></svg>
    <span class="sr-only">å‰ã®ç« </span>
  </a>
  <small class="muted" style="margin-left:6px;">â†‘ / å‰ã®ãƒãƒ£ãƒ—ã‚¿ãƒ¼</small>
</div>

<div class="grid4" id="editorGrid" data-chapter="{{ chapter_path }}">
  {% for f in files %}
  <section class="pane" data-filename="{{ f.filename }}">
    <header class="pane-head">
      <div class="pane-title">
        <strong>{{ chapter_name }}</strong>
        <span>-</spap>
        <strong>{{ f.label }}</strong>
        <span class="file">{{ f.filename }}</span>
        <span class="dirty" hidden>â—æœªä¿å­˜</span>
      </div>
      <div class="pane-tools">
        <button class="btn btn-save">ä¿å­˜</button>
      </div>
    </header>
    <textarea class="editor" spellcheck="false">{{ f.content }}</textarea>
  </section>
  {% endfor %}
</div>

<!-- â˜… ä¸‹ï¼šæ¬¡ãƒãƒ£ãƒ—ã‚¿ãƒ¼ -->
<div class="vnav vnav-bottom" style="margin-top:8px;">
  <a class="nav-arrow" aria-label="æ¬¡ã®ç« ã¸ (â†“)"
     href="{{ url_for('chapter', chapter_path=next_chapter) }}">
    <svg class="icon" aria-hidden="true"><use href="#i-chevron-down"></use></svg>
    <span class="sr-only">æ¬¡ã®ç« </span>
  </a>
  <small class="muted" style="margin-left:6px;">â†“ / æ¬¡ã®ãƒãƒ£ãƒ—ã‚¿ãƒ¼</small>
</div>

<details id="notesWrap" class="notes" open hidden>
  <summary>notes.md</summary>
  <section class="pane" data-filename="notes.md">
    <header class="pane-head">
      <div class="pane-title">
        <strong>Notes</strong>
        <span class="file">notes.md</span>
        <span class="dirty" hidden>â—æœªä¿å­˜</span>
      </div>
      <div class="pane-tools">
        <button class="btn btn-save">ä¿å­˜</button>
      </div>
    </header>
    <textarea class="editor" spellcheck="false" wrap="soft">{{ notes }}</textarea>
  </section>
</details>

<div id="toast" class="toast" hidden></div>
{% endblock %}

{% block scripts %}
<script>
  window.__CHAPTER_PATH__ = "{{ chapter_path }}";
  // â˜… JSç”¨ï¼šä¸Šä¸‹ç§»å‹•URL
  window.__GRID_NAV__ = {
    prevChapterUrl: "{{ url_for('chapter', chapter_path=prev_chapter) }}",
    nextChapterUrl: "{{ url_for('chapter', chapter_path=next_chapter) }}"
  };
</script>
{% endblock %}
